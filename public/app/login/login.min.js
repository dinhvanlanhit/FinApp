function buttonloading(e, type) {
    if (e != undefined && type != undefined) {
        if (type == true) {
            if (!$(e).children("i").hasClass("loadding")) {
                $(e).attr('disabled',type);
                $(e).prepend('<i  class="loadding spinner-border spinner-border-sm mr-1"></i>');
            }
        } else {
            if ($(e).children("i").hasClass("loadding")) {
                $(e).children("i").remove();
                $(e).attr('disabled',type);
            }
        }
    }
}
function alertLogin(message){
    var alerthtml = '<div class="alert alert-danger alert-dismissible" role="alert">';
    alerthtml +=''+message+'';
    alerthtml +='<button type="button" class="close" data-dismiss="alert" aria-label="Close">';
    alerthtml +='<span aria-hidden="true">&times;</span>';
    alerthtml +='</button>';
    alerthtml +='</div>'
    return alerthtml;
 }
$(document).ready(function(){
    var icon = '<i class="fas fa-exclamation-circle"></i>';
    $.ajaxSetup({headers: { 'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content') }});
    $("#form-login").on('submit',function(e){
        buttonloading('#button-login',true);
        e.preventDefault();
        var formData = new FormData(this);
        $.ajax({
            url:routes.login,
            type:'POST',
            data:formData,
            dataType:'JSON',
            processData: false,
            contentType: false,
            success:function(data){
                if(data.statusBoolen){
                    return window.location.href=routes.dashboard ;
                }else{
        
                    $("#alert").html(alertLogin(data.messages));
                    buttonloading('#button-login',false);
                }
            },error:function(error){
                $("#alert").html(alertLogin('<i class="fa fa-exclamation-triangle" aria-hidden="true"></i> Emergency notification','The server system is having a problem waiting for a moment!'));
                buttonloading('#button-login',false);
            }
        });
   });
});